This is old and needs updating and has not bene updated since before the Community ENTerprise Operationg System 
went non-community.


#!/bin/bash


#THIS IS WIP/untested and NOT UPDATED or IN SYNC YET, some of this is old ideas

#installcentos8.txt
##REQUIRED ENTRIES##
#Define your NEW_IP , same as your apache/http server ip
#Replace XXX.XXX.XXX.XXX with your ip
#Or use hostname for debian server if dns available
HTTPNEW_IP=XXX.XXX.XXX.XXX

#Define your HDHR-extend (transcode) ip
HDHR_IP=XXX.XXX.XXX.XXX


#################################################
yum update -y && yum upgrade -y

##yum enabled epel,rpmfusion

yum install -y curl daemonize git hdhomerun-config ffmpeg ffmpegthumbnailer vim-nox xmlstarlet 



#add and script instructions for enabling cgi
systemctl restart httpd

cd /root
git clone https://github.com/kelsieflynn/HLS-Streaming-LiveTV-at-home-with-ffmpeg-httpd-CGI

cp -av HLS-Streaming-LiveTV-at-home-with-ffmpeg-httpd-CGI/html/* /var/www/html
cp -av HLS-Streaming-LiveTV-at-home-with-ffmpeg-httpd-CGI/cgi-bin/* /var/www/cgi-bin

#for IP of SERVER HOSTING HTTP/APACHE not HDHR
sed -i 's/192.168.1.162/HTTPNEW_IP/g' /var/www/html/index.html

#This document was written with using a silicon dust hdhr-extend which has hw transcoding.
#You will need to scan for channels on your hdhr from its web interface by ip by going to its ip/lineup.html
#eg.
#
#http://HDHR_IP/lineup.html
#
#Choose Detect Channels if the channels are not populated already.
#<screenshot>

#*dl channels to ~/channels.txt #note we are removing any channels that dont have a period, which represents the virtual or actual subchannel

curl  -s http://HDHR_IP/lineup.xml|xmlstarlet sel -t -v "//GuideNumber"|sed '/\./!d'>/var/www/html/channels.txt

#create new dirs from channels.txt
cd /var/www/html
for i in `cat channels.txt` ;do mkdir -pv hls/$i;done

#Change the permissions on cgi-bin to root
chown -R root. /var/www/cgi-bin/*

#Change the permissions on /var/www/html to apache/http/nobody
chown -R apache. /var/www/html

#change mode to 0755 for /var/www/html
chmod -R 0755 /var/www/html


###now go to the /var/www/cgi-bin directory
#cd /var/www/cgi-bin

###also reference your channels from the channels.txt file in /var/www/html
##Now you need to do some manual editing to the index.html file and change the channels to your channels or you can use sed like below to change the default channels to yours.

